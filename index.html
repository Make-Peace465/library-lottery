<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="page-wrapper"> <!-- New wrapper div -->
        <div class="container">
            <h1>O-week 2025: 10 September (Day 1)</h1> <!-- Moved the title here -->
            <div class="inside-container">
                <div class="upper-panel">
                    <div class="onlineCoursePrizeSection">
                        <p style="font-size: 20px; color: #4A90E2; font-weight: bold;">Large prize: Online Courses</p>
                        <p class="onlineCoursedisplay"></p>
                        <button class="onlineCourselotteryButton">Pick a prize now!</button>
                    </div>
                    <div class="prizeCount">
                        <p>Large prize remaining:</p>&nbsp;
                        <p class="onlineCoursetotalNumber"></p>
                    </div>
                </div>

                <div class="lower-panel">
                    <div class="stampCollectionPrizeSection">
                        <p style="font-size: 20px; color: #4A90E2; font-weight: bold;">Middle Prize: Stamp Collection</p>
                        <p class="stampCollectiondisplay"></p>
                        <button class="stampCollectionlotteryButton">Pick a prize now!</button>
                    </div>
                    <div class="prizeCount">
                        <p>Middle prize remaining:</p>&nbsp;
                        <p class="stampCollectionTotalNumber"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        //Add variable for large prize/middle prize to keep track of the total number
        
        let onlineCoursePrize = [
            {
                name: "Stuffed Animals",
                quantity: 20,
            },
            {
                name: "cups",
                quantity: 20,
            },
            {
                name: "Notebooks",
                quantity: 20,
            }
        ]

        let stampCollectionPrize = [
            {
                name: "Stuffed Animals",
                quantity: 20,
            },
            {
                name: "books",
                quantity: 20,
            },
            {
                name: "happiness",
                quantity: 20,
            }
        ]

        window.addEventListener("load", (event) => {
            if (localStorage.length === 0) {
                console.log("localStorage is empty.");
                
                showOnlineCoursePrizeTotalNumber();
                showStampCollectionPrizeTotalNumber();
            } else {
                onlineCoursePrize = JSON.parse(localStorage.getItem("onlineCoursePrize"));
                console.log(onlineCoursePrize);

                showOnlineCoursePrizeTotalNumber();
                showStampCollectionPrizeTotalNumber();
            }
        });

        const onlineCourselotteryButton = document.querySelector(".onlineCourselotteryButton");
        const onlineCoursedisplay = document.querySelector(".onlineCoursedisplay");
        const onlineCoursetotalNumber = document.querySelector(".onlineCoursetotalNumber");
        
        const stampCollectiondisplay = document.querySelector(".stampCollectiondisplay");
        const stampCollectionlotteryButton = document.querySelector(".stampCollectionlotteryButton");
        const stampCollectionTotalNumber = document.querySelector(".stampCollectionTotalNumber");

        //For online course prize
        function onlineCourseLottery() {
            onlineCoursedisplay.textContent = "";

            setTimeout(() => {
                //Generate a random Number and find the prize
                let ranNum = getRandomIntInclusive(0, onlineCoursePrize.length-1);
                let prize = onlineCoursePrize[ranNum];
                
                //Display the prize name on the screen
                onlineCoursedisplay.textContent = prize.name;

                //Decrease the prize quantity by 1
                prize.quantity -= 1;
                
                //Check and remove the item that it's prize quantity is already zero
                onlineCoursePrize = onlineCoursePrize.filter(item => item.quantity > 0);

                showOnlineCoursePrizeTotalNumber();

                //Store the value to localStorage:
                localStorage.setItem("onlineCoursePrize", JSON.stringify(onlineCoursePrize));
                console.log(localStorage);

                //enabled the button
                onlineCourselotteryButton.disabled = false;
            }, "1000");
        };
        

        function showOnlineCoursePrizeTotalNumber() {
            onlineCoursetotalNumber.textContent = calculateOnlineCoursePrizeTotalNumber();
        }

        function calculateOnlineCoursePrizeTotalNumber() {
            let sum = 0;
            for (const item of onlineCoursePrize) {
                console.log(item);
                sum += item.quantity;
            }
            return sum;
        }

        onlineCourselotteryButton.addEventListener("click", () => {
            onlineCourselotteryButton.disabled = true;
            onlineCourseLottery();
        });

        //For Stamp Collection Prize
        function stampCollectionPrizeLottery() {
            stampCollectiondisplay.textContent = "";

            setTimeout(() => {
                //Generate a random Number and find the prize
                let ranNum = getRandomIntInclusive(0, stampCollectionPrize.length-1);
                let prize = stampCollectionPrize[ranNum];
                
                //Display the prize name on the screen
                stampCollectiondisplay.textContent = prize.name;

                //Decrease the prize quantity by 1
                prize.quantity -= 1;
                
                //Check and remove the item that it's prize quantity is already zero
                stampCollectionPrize = stampCollectionPrize.filter(item => item.quantity > 0);

                showStampCollectionPrizeTotalNumber();

                //Store the value to localStorage:
                localStorage.setItem("onlineCoursePrize", JSON.stringify(onlineCoursePrize));
                console.log(localStorage);

                //enabled the button
                stampCollectionlotteryButton.disabled = false;
            }, "1000");
        };
        
        function showStampCollectionPrizeTotalNumber() {
            stampCollectionTotalNumber.textContent = calculateStampCollectionPrizeTotalNumber();
        }

        function calculateStampCollectionPrizeTotalNumber() {
            let sum = 0;
            for (const item of stampCollectionPrize) {
                console.log(item);
                sum += item.quantity;
            }
            return sum;
        }

        stampCollectionlotteryButton.addEventListener("click", () => {
            stampCollectionlotteryButton.disabled = true;
            stampCollectionPrizeLottery();
        });

        function getRandomIntInclusive(min, max) {
            //Math.ceil() round up and returns the smallest integer gratern than or equal to a given number
            const minCeiled = Math.ceil(min);
            //Math.floor() round down the number and return the largest integer less than or equal to a given number
            const maxFloored = Math.floor(max);
            return Math.floor(Math.random() * (maxFloored - minCeiled + 1) + minCeiled); // The maximum is inclusive and the minimum is inclusive
        }

    </script>
</body>
</html>